/* =================================================================== */
/* ====================  UI 憸冽聢 (New UI Style) ==================== */
/* =================================================================== */

:root {
    --bg-light: #F9FAFB;
    --bg-white: #FFFFFF;
    --border-color: #E5E7EB;
    --text-primary: #1F2937;
    --text-secondary: #6B7280;
    --accent-primary: #111827; /* 銝餅雿𨀣閖 (瘛梢) */
    --accent-primary-hover: #374151;
    --accent-delete: #DC2626;
    --accent-delete-hover: #B91C1C;
    --font-family: Arial, "Noto Sans TC", sans-serif;
    --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
    --shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
    --radius-md: 8px;
    --radius-lg: 12px;
    --breakpoint-md: 768px; /* RWD Breakpoint */
}

body {
    font-family: var(--font-family);
    line-height: 1.5;
    background-color: var(--bg-light);
    color: var(--text-primary);
    margin: 0;
    padding: 0;
    font-size: 14px;
    height: 100vh;
    overflow-x: hidden;
}

/* ==================== 銝餉雿 (Main Layout) ==================== */

/* Mobile First: Sidebar hidden by default */
.sidebar {
    position: fixed;
    top: 0;
    left: 0;
    bottom: 0;
    width: 220px;
    background-color: var(--bg-white);
    border-right: 1px solid var(--border-color);
    padding: 20px 10px;
    display: flex;
    flex-direction: column;
    z-index: 1001;
    transform: translateX(-100%);
    transition: transform 0.3s ease-in-out;
}
.sidebar.is-visible {
    transform: translateX(0);
}

.sidebar-header {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 10px;
    padding: 0 10px 20px 10px;
    border-bottom: 1px solid var(--border-color);
}
.sidebar-logo { height: 32px; }
.sidebar-title { font-size: 16px; font-weight: bold; }
.sidebar-nav { list-style: none; padding: 0; margin: 20px 0; }
.nav-btn {
    display: block;
    width: 100%;
    padding: 10px 15px;
    border: none;
    background: none;
    color: var(--text-secondary);
    font-size: 14px;
    text-align: left;
    border-radius: var(--radius-md);
    cursor: pointer;
    transition: all 0.2s ease;
}
.nav-btn:hover { background-color: var(--bg-light); color: var(--text-primary); }
.nav-btn.active { background-color: var(--bg-light); color: var(--text-primary); font-weight: bold; }

/* Mobile Header */
.mobile-header {
    display: flex;
    align-items: center;
    gap: 15px;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    height: 56px;
    padding: 0 15px;
    background: var(--bg-white);
    border-bottom: 1px solid var(--border-color);
    z-index: 999;
}
#hamburger-btn {
    background: none;
    border: none;
    padding: 5px;
    cursor: pointer;
}
#hamburger-btn svg {
    display: block;
}
#mobile-page-title {
    margin: 0;
    font-size: 18px;
    font-weight: 600;
}

/* Mobile Overlay */
#mobile-menu-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0,0,0,0.5);
    z-index: 1000;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s ease, visibility 0.3s;
}
#mobile-menu-overlay.is-visible {
    opacity: 1;
    visibility: visible;
}


.main-content {
    width: 100%;
    overflow-y: auto;
    padding: 15px;
    padding-top: 71px; /* 56px header + 15px padding */
}

.page-content { display: none; flex-direction: column; gap: 20px; animation: fadeIn 0.3s; }
.page-content.active { display: flex; }
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

.page-header {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    gap: 10px;
    padding-bottom: 15px;
    border-bottom: 1px solid var(--border-color);
}
.page-header h1 { margin: 0; font-size: 24px; }

/* Desktop Layout */
@media (min-width: 768px) {
    body {
        display: flex;
        height: 100vh;
        overflow: hidden;
    }
    .sidebar {
        position: static;
        flex: 0 0 220px;
        transform: none;
        transition: none;
    }
    .main-content {
        flex: 1;
        padding: 30px;
        padding-top: 30px; /* Reset padding */
    }
    .mobile-header, #mobile-menu-overlay {
        display: none;
    }
    .page-header {
        flex-direction: row;
        justify-content: space-between;
        align-items: center;
    }
}


/* ==================== 𡁶鍂辣 (General Components) ==================== */
button, input, select, textarea {
    font-family: var(--font-family);
    font-size: 14px;
    border: 1px solid var(--border-color);
    border-radius: var(--radius-md);
    padding: 8px 12px;
    background-color: var(--bg-white);
    transition: border-color 0.2s, box-shadow 0.2s;
}
input, textarea { width: 100%; box-sizing: border-box; }
input:focus, select:focus, textarea:focus {
    outline: none;
    border-color: var(--accent-primary);
    box-shadow: 0 0 0 2px rgba(17, 24, 39, 0.2);
}
button { cursor: pointer; background-color: var(--bg-white); color: var(--text-primary); }
button:hover { border-color: #D1D5DB; }
button.primary-action { background-color: var(--accent-primary); color: var(--bg-white); border-color: var(--accent-primary); }
button.primary-action:hover { background-color: var(--accent-primary-hover); border-color: var(--accent-primary-hover); }
button.delete-btn-style { background-color: var(--accent-delete); color: var(--bg-white); border-color: var(--accent-delete); }
button.delete-btn-style:hover { background-color: var(--accent-delete-hover); border-color: var(--accent-delete-hover); }

.controls-container {
    width: 100%;
    display: flex;
    flex-direction: column;
    align-items: stretch;
    gap: 15px;
    background: var(--bg-white);
    padding: 15px;
    margin-bottom: 20px;
    border-radius: var(--radius-lg);
    border: 1px solid var(--border-color);
}
.list-controls { flex-wrap: wrap; gap: 10px; }
.list-controls label { font-weight: 500; }
.control-group { display: flex; flex-wrap: wrap; gap: 10px; }

@media (min-width: 768px) {
    .controls-container {
        flex-direction: row;
        justify-content: space-between;
        align-items: center;
    }
    .control-group {
        flex-wrap: nowrap;
    }
}


/* ==================== 銵冽踎 (Dashboard) ==================== */
.kpi-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; }
.kpi-card { background: var(--bg-white); padding: 20px; border-radius: var(--radius-lg); border: 1px solid var(--border-color); box-shadow: var(--shadow-sm); }
.kpi-card .card-title { font-size: 14px; color: var(--text-secondary); margin-bottom: 8px; }
.kpi-card .card-value { font-size: 24px; font-weight: bold; }
.chart-grid { display: grid; grid-template-columns: 1fr; gap: 20px; }
.chart-container-wrapper, .quick-access-card { background: var(--bg-white); padding: 20px; border-radius: var(--radius-lg); border: 1px solid var(--border-color); }
.chart-header, .card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
.chart-header h2, .card-header h3 { margin: 0; font-size: 16px; }
.chart-container { position: relative; height: 250px; width: 100%; }
.chart-pie-container { height: 250px; display: flex; justify-content: center; align-items: center; }
#statusPieChart { max-height: 230px; }
.quick-access-grid { display: grid; grid-template-columns: 1fr; gap: 20px; }
.quick-access-list-item { display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid var(--border-color); }
.quick-access-list-item:last-child { border-bottom: none; }
.item-main .item-title { font-weight: bold; }
.item-main .item-subtitle { font-size: 12px; color: var(--text-secondary); }
.item-side { font-size: 12px; color: var(--text-secondary); text-align: right; }

@media (min-width: 768px) {
    .kpi-grid { grid-template-columns: repeat(4, 1fr); gap: 20px; }
    .kpi-card .card-value { font-size: 28px; }
    .chart-grid { grid-template-columns: 2fr 1fr; }
    .chart-container { height: 300px; }
    .chart-pie-container { height: 300px; }
    #statusPieChart { max-height: 280px; }
    .quick-access-grid { grid-template-columns: 1fr 1fr; }
}

/* ==================== 𡑒”𢒰 (List Pages) ==================== */
.list-summary { margin-bottom: 15px; font-size: 14px; color: var(--text-secondary); }
.list-container { display: flex; flex-direction: column; gap: 15px; }
.grid-container { display: grid; grid-template-columns: 1fr; gap: 20px; }
@media (min-width: 640px) {
    .grid-container {
        grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
    }
}


.quote-card, .customer-card, .project-card, .template-card, .note-item {
    background: var(--bg-white); border: 1px solid var(--border-color); border-radius: var(--radius-md); padding: 15px;
    display: flex; flex-direction: column; align-items: flex-start; gap: 10px;
    transition: box-shadow 0.2s, border-color 0.2s;
}
@media (min-width: 768px) {
    .quote-card, .note-item {
        flex-direction: row;
        justify-content: space-between;
        align-items: center;
    }
}
.quote-card:hover, .customer-card:hover, .project-card:hover, .template-card:hover, .note-item:hover { border-color: #D1D5DB; box-shadow: var(--shadow); }
.quote-card-info, .note-item-info { flex-grow: 1; }
.quote-card-info h3, .customer-card h3, .project-card h3, .template-card h3 { margin: 0; font-size: 16px; display: flex; flex-wrap: wrap; align-items: center; gap: 8px; }
.quote-card-info p, .customer-card p, .project-card p { margin: 5px 0 0 0; font-size: 12px; color: var(--text-secondary); word-break: break-all; }
.quote-card-actions, .customer-card .card-actions, .template-card .card-actions, .note-item-actions { display: flex; gap: 10px; width: 100%; justify-content: flex-end;}
.quote-card-actions button, .customer-card .card-actions button, .project-card .card-actions button, .template-card .card-actions button, .note-item-actions button { padding: 5px 10px; font-size: 12px; }

.customer-card, .project-card, .template-card { flex-direction: column; align-items: flex-start; }
.customer-card .card-actions, .project-card .card-actions, .template-card .card-actions { margin-top: 15px; width: 100%; justify-content: flex-end; }
.project-card { border-left: 4px solid var(--text-secondary); }
.project-card.status-completed { border-left-color: #22C55E; }
.project-card.status-in_progress { border-left-color: #3B82F6; }
.project-card.status-on_hold { border-left-color: #F97316; }

.template-card .template-descriptions { list-style-type: disc; padding-left: 20px; margin: 10px 0 0 0; font-size: 13px; color: var(--text-secondary); }

.note-item-info p { margin: 0; }
.note-item-info .note-categories { margin-top: 8px; display: flex; flex-wrap: wrap; gap: 5px; }
.note-category-tag { background-color: var(--bg-light); color: var(--text-secondary); font-size: 11px; padding: 2px 8px; border-radius: 99px; border: 1px solid var(--border-color); }


.no-quotes { text-align: center; color: var(--text-secondary); padding: 40px; background-color: var(--bg-white); border: 1px dashed var(--border-color); border-radius: var(--radius-lg); }
.quote-status { padding: 3px 10px; border-radius: 99px; font-size: 10px; font-weight: 500; color: white; display: inline-block; margin-bottom: 5px; }
.status-draft { background-color: #6B7280; }
.status-sent { background-color: #3B82F6; }
.status-confirmed { background-color: #22C55E; }
.status-rejected { background-color: var(--accent-delete); }
.status-expired { background-color: #F97316; }

/* ==================== 銵典鱓𢒰 (Form Pages) ==================== */
#customerFormContainer, #projectFormContainer { background: var(--bg-white); border-radius: var(--radius-lg); border: 1px solid var(--border-color); padding: 20px; }
#customerForm, #projectForm { display: flex; flex-direction: column; width: 100%; gap: 15px; }
.form-row, .form-col { display: flex; flex-direction: column; gap: 5px; }
.form-row label, .form-col label { font-weight: 500; color: var(--text-primary); }
.form-actions { display: flex; flex-wrap: wrap; gap: 10px; justify-content: flex-end; margin-top: 20px; padding-top: 20px; border-top: 1px solid var(--border-color); }
.form-row-grid { display: grid; grid-template-columns: 1fr; gap: 15px 20px; }
.customer-quotes-section { width: 100%; margin-top: 30px; border-top: 1px solid var(--border-color); padding-top: 20px; }
.task-section { border-top: 1px solid var(--border-color); padding-top: 15px; }
.task-section h2 { margin-top: 0; }
.data-table { width: 100%; border-collapse: collapse; }
.data-table th, .data-table td { border-bottom: 1px solid var(--border-color); padding: 10px; text-align: left; }
.data-table th { background-color: var(--bg-light); color: var(--text-secondary); font-size: 12px; text-transform: uppercase; }
.data-table td input[type="text"], .data-table td input[type="date"] { border: none; padding: 0; width: 100%; }
.data-table td input:focus { box-shadow: none; }
.data-table .task-status-checkbox { width: 16px; height: 16px; }
.data-table .delete-task-btn { background: none; border: none; color: var(--accent-delete); font-size: 20px; }

@media (min-width: 768px) {
    #customerFormContainer, #projectFormContainer { padding: 30px; }
    .form-row-grid { grid-template-columns: 1fr 1fr; }
}


.checkbox-group {
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
    padding: 10px;
    border: 1px solid var(--border-color);
    border-radius: var(--radius-md);
    background-color: var(--bg-white);
}
.checkbox-group label {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 14px;
    cursor: pointer;
}


/* ==================== 鈭鍦閬𣇉 (Modals) ==================== */
.modal-backdrop {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
    display: flex; justify-content: center; align-items: center;
    z-index: 1000; padding: 15px; box-sizing: border-box;
}
.modal-container {
    background: var(--bg-white);
    border-radius: var(--radius-lg);
    box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
    width: 100%; max-width: 500px;
    display: flex; flex-direction: column;
    max-height: 90vh;
}
@media (min-width: 768px) {
    .modal-container { max-width: 800px; }
}

.modal-header {
    display: flex; justify-content: space-between; align-items: center;
    padding: 15px 20px; border-bottom: 1px solid var(--border-color);
}
.modal-header h2 { margin: 0; font-size: 18px; }
.modal-close-btn { background: none; border: none; font-size: 24px; cursor: pointer; }
.modal-body { display: grid; grid-template-columns: 1fr; gap: 20px; padding: 20px; overflow-y: auto; }
@media (min-width: 768px) {
    .modal-body { grid-template-columns: 1fr 2fr; }
}

.modal-body-single-col { display: flex; flex-direction: column; gap: 15px; padding: 20px; overflow-y: auto; }
.modal-col h3 { margin: 0 0 10px 0; font-size: 16px; }
#templateItemSearch { margin-bottom: 10px; }
.modal-list { list-style: none; padding: 0; margin: 0; border: 1px solid var(--border-color); border-radius: var(--radius-md); overflow-y: auto; max-height: 200px;}
@media (min-width: 768px) {
    .modal-list { max-height: 400px; }
}

.modal-list li { padding: 10px; cursor: pointer; border-bottom: 1px solid var(--border-color); }
.modal-list li:last-child { border-bottom: none; }
.modal-list li:hover { background-color: var(--bg-light); }
.modal-list li.active { background-color: var(--accent-primary); color: white; font-weight: bold; }

/* --- [START] MODAL CHECKBOX LIST FIX --- */
.modal-desc-list {
    border: 1px solid var(--border-color);
    border-radius: var(--radius-md);
    padding: 10px;
    max-height: 200px;
    overflow-y: auto;
}
@media (min-width: 768px) {
    .modal-desc-list { max-height: 400px; }
}

.modal-desc-list label {
    display: grid; grid-template-columns: min-content 1fr; 
    align-items: start; gap: 10px;
    padding: 8px; border-radius: var(--radius-md);
    cursor: pointer; line-height: 1.4; word-break: break-word;
}
.modal-desc-list label:hover { background-color: var(--bg-light); }
.modal-desc-list label input[type="checkbox"] { margin: 0; align-self: start; }
.modal-desc-list label span { white-space: normal; }
/* --- [END] MODAL CHECKBOX LIST FIX --- */

.modal-placeholder { color: var(--text-secondary); text-align: center; padding: 20px; }
.modal-footer { padding: 15px 20px; border-top: 1px solid var(--border-color); display: flex; flex-wrap: wrap; justify-content: flex-end; gap: 10px; align-items: center; }

.descriptions-editor { display: flex; flex-direction: column; gap: 10px; }
.description-entry { display: flex; align-items: center; gap: 10px; }
.description-entry input { flex-grow: 1; }
.description-entry .delete-desc-btn { padding: 5px; font-size: 12px; line-height: 1; background-color: #FEE2E2; color: #B91C1C; border: 1px solid #FCA5A5;}
.add-desc-btn { align-self: flex-start; }


/* ==================== 梯”鈭𧢲 (Reports & Calendar) ==================== */
.reports-container, .calendar-container { width: 100%; background: var(--bg-white); border: 1px solid var(--border-color); border-radius: var(--radius-lg); padding: 15px; }
.report-controls { padding: 0; border: none; background: none; }
#reportResult table { width: 100%; }
.calendar-nav { flex-grow: 1; justify-content: center; }
.calendar-header, .calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); text-align: center; }
.calendar-header { font-weight: bold; padding-bottom: 10px; border-bottom: 2px solid var(--border-color); color: var(--text-secondary); }
.calendar-day { border: 1px solid var(--border-color); min-height: 80px; padding: 4px; font-size: 12px; position: relative; }
.calendar-day.empty { background-color: var(--bg-light); }
.calendar-day .day-number { position: absolute; top: 4px; right: 4px; color: var(--text-secondary); }
.calendar-day .events { display: flex; flex-direction: column; gap: 3px; margin-top: 20px; }
.event { padding: 3px; border-radius: 4px; font-size: 10px; color: white; text-align: left; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; cursor: pointer; }
.event-quote { background-color: #3B82F6; } .event-layout { background-color: #F97316; }
.event-deadline { background-color: #DC2626; } .event-project-start { background-color: #22C55E; }
.event-project-end { background-color: #8B5CF6; } .event-task { background-color: #6B7280; }

@media (min-width: 768px) {
    .reports-container, .calendar-container { padding: 20px; }
    .calendar-day { min-height: 100px; }
}

/* ================================================================================= */
/* ==================== 勗格隞嗆見撘 (隞乩券靽萘銝滩) ============================ */
/* ================================================================================= */
.quotation-container { width: 100%; max-width: 800px; background: #fff; padding: 15px; border: 1px solid #ccc; box-shadow: 0 0 10px rgba(0, 0, 0, 0.1); color: #000000; margin: 0 auto; }
@media (min-width: 768px) {
    .quotation-container { padding: 30px; }
}
.quotation-container [contenteditable="true"]:focus { outline: 2px solid #007bff; }
.quotation-container header { text-align: center; color: #000; }
.quotation-container .logo { display: flex; justify-content: center; margin-bottom: 20px; }
.quotation-container .logo img { height: 40px; }
.quotation-container header h1 { color: #000; font-size: 16px; margin-bottom: 20px; border-bottom: 1px solid #333; padding-bottom: 5px; }
.quotation-container .header-info { display: grid; grid-template-columns: 1fr; gap: 10px; margin-bottom: 20px; }
@media (min-width: 768px) {
    .quotation-container .header-info { grid-template-columns: 1fr 1fr; }
}
.quotation-container .info-row { display: flex; align-items: center; }
.quotation-container .info-row .label { font-weight: bold; width: 120px; flex-shrink: 0; }
.quotation-container .info-row .value { flex-grow: 1; }
.quotation-container .info-row input { border: none; font-family: inherit; font-size: inherit; width: 100%; color: #000; background-color: #fff; }
.quotation-container .itemized-list { border-top: 1px solid #e0e0e0; }
.quotation-container .itemized-list h2 { background-color: #143475; font-size: 14px; color: white; padding: 5px; margin: 0; text-align: left; }
.quotation-container .itemized-list table { width: 100%; border-collapse: collapse; margin-bottom: 20px; table-layout: fixed; }
.quotation-container .itemized-list th, .quotation-container .itemized-list td { border: 1px solid #e0e0e0; padding: 5px; text-align: left; vertical-align: middle; font-size: 12px; word-wrap: break-word; }
.quotation-container .itemized-list th { font-weight: bold; white-space: nowrap; }

/* Responsive Table: Mobile First */
.quotation-container .itemized-list thead {
    display: none;
}
.quotation-container .itemized-list tr {
    display: block;
    border: 1px solid #e0e0e0;
    margin-bottom: 15px;
    border-radius: var(--radius-md);
    padding: 10px;
}
.quotation-container .itemized-list td {
    display: block;
    text-align: right !important; /* Force right align for values */
    padding: 8px 0;
    border: none;
    border-bottom: 1px solid #f0f0f0;
}
.quotation-container .itemized-list tr td:last-child {
    border-bottom: none;
}
.quotation-container .itemized-list td::before {
    content: attr(data-label);
    float: left;
    font-weight: bold;
    text-align: left;
    white-space: nowrap;
    margin-right: 10px;
}
.quotation-container .itemized-list td[contenteditable="true"] {
    text-align: left !important; /* Reset for editable fields */
}

@media (min-width: 768px) {
    /* Restore table for desktop */
    .quotation-container .itemized-list thead {
        display: table-header-group;
    }
    .quotation-container .itemized-list tr {
        display: table-row;
        border: none;
        margin-bottom: 0;
        border-radius: 0;
        padding: 0;
    }
    .quotation-container .itemized-list td {
        display: table-cell;
        border: 1px solid #e0e0e0;
        padding: 5px;
    }
    .quotation-container .itemized-list td::before {
        content: "";
        display: none;
    }
    .quotation-container .itemized-list th:nth-child(1), .quotation-container .itemized-list td:nth-child(1) { width: 15%; }
    .quotation-container .itemized-list th:nth-child(2), .quotation-container .itemized-list td:nth-child(2) { width: 45%; }
    .quotation-container .itemized-list th:nth-child(3), .quotation-container .itemized-list td:nth-child(3) { width: 8%; }
    .quotation-container .itemized-list th:nth-child(4), .quotation-container .itemized-list td:nth-child(4) { width: 8%; }
    .quotation-container .itemized-list th:nth-child(5), .quotation-container .itemized-list td:nth-child(5) { width: 8%; }
    .quotation-container .itemized-list th:nth-child(6), .quotation-container .itemized-list td:nth-child(6) { width: 8%; }
    .quotation-container .itemized-list td[contenteditable="true"] {
        text-align: left !important;
    }
    .quotation-container .itemized-list th:nth-child(3), .quotation-container .itemized-list td:nth-child(3),
    .quotation-container .itemized-list th:nth-child(4), .quotation-container .itemized-list td:nth-child(4),
    .quotation-container .itemized-list th:nth-child(5), .quotation-container .itemized-list td:nth-child(5),
    .quotation-container .itemized-list th:nth-child(6), .quotation-container .itemized-list td:nth-child(6) {
        text-align: right;
    }
}
.quotation-container .itemized-list td input[type="number"] { width: 90%; border: none; padding: 4px; box-sizing: border-box; text-align: right; color: #000; background-color: #fff; }

.quotation-container .final-table { width: 100%; border-collapse: collapse; }
.quotation-container .final-table tr { display: flex; flex-direction: column; }
.quotation-container .final-table td { padding: 0; vertical-align: top; width: 100% !important; }

@media (min-width: 768px) {
    .quotation-container .final-table tr {
        display: table-row;
    }
    .quotation-container .payment-cell { width: 63% !important; padding-right: 20px !important; border-right: 1px solid #e0e0e0 !important; }
    .quotation-container .summary-cell { width: 37% !important; padding-left: 20px !important; }
}

.quotation-container .payment-cell h2, .quotation-container .payment-cell p, .quotation-container .payment-cell h3, .quotation-container .payment-cell li { font-size: 12px; padding-left: 10px; }
.quotation-container .summary-cell { padding-top: 20px; }
.quotation-container .summary-section { text-align: right; padding-left: 10px ; }
.quotation-container .summary-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px; }
.quotation-container .summary-row .label { font-weight: bold; margin-right: 10px; white-space: nowrap; }
.quotation-container .summary-row .value { border: none; padding: 2px 5px; min-width: 80px; text-align: right; padding-right: 5px; }
.quotation-container .summary-row.grand-total .label, .quotation-container .summary-row.grand-total .value { font-size: 14px; }
.quotation-container .notes-container { margin-top: 15px; border: 1px solid #e0e0e0; }
.quotation-container .notes-container h2 { background-color: #143475; color: white; font-size: 14px; padding: 5px; margin: 0; text-align: left; border-bottom: none; }
.quotation-container .notes-container ol { list-style-type: none;  border: none; margin: 0; padding: 0; }
.quotation-container .notes-container li { padding: 8px; font-size: 12px; border-bottom: 1px solid #e0e0e0;position: relative; }
.quotation-container .notes-container li:last-child { border-bottom: 1px solid #e0e0e0; }
.quotation-container .notes-container ol {counter-reset: note-counter;}
.quotation-container .notes-container li::before { content: counter(note-counter) ". "; counter-increment: note-counter; margin-right: 1px; }
.quotation-container .signature-table { width: 100%; height: 100px; border-collapse: collapse; }
.quotation-container .signature-table td { padding: 10px; vertical-align: top; }
.quotation-container .signature-cell-left { border-right: 1px solid #e0e0e0; width: 50%; }
.quotation-container .signature-cell-right-empty { width: 50%; padding: 10px; }
.quotation-container .ninja-cat-table { width: 100%; border-collapse: collapse; }
.quotation-container .ninja-cat-table td { padding: 5px; vertical-align: top; font-size: 16px; }
.quotation-container .signature-cell-left h2 { font-size: 12px; background-color: transparent; margin: 0; padding-bottom: 5px; color: #333; }
.quotation-container .ninja-cat-cell { background-color: #143475; color: #fff; padding: 5px 10px; font-size: 14px; text-align: right; font-style: italic;}

@media print {
    body { background: #fff !important; color: #000 !important; -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important; margin: 0; padding: 0; width: 100%; display: block; height: auto; }
    .sidebar, .main-content > .page-content:not(.active), .controls-container, .page-header, .form-actions, .card-actions, .chart-container-wrapper, .kpi-grid, .quick-access-grid, .modal-backdrop, .mobile-header { display: none !important; }
    .main-content { overflow: visible; padding: 0; }
    .page-content.active { display: block !important; animation: none !important; padding: 0; }
    .quotation-container { width: 100% !important; max-width: 100% !important; margin: 0 !important; padding: 0 !important; border: none !important; box-shadow: none !important; color: #000 !important; }
    .itemized-list h2, .notes-container h2 { background-color: #143475 !important; color: white !important; padding: 5px !important;}
    input, textarea, [contenteditable="true"] { color: #000 !important; background: transparent !important; border: none !important; box-shadow: none !important; padding: 0 !important; -webkit-user-modify: read-only !important; user-modify: read-only !important; }
    input[type="date"]::-webkit-calendar-picker-indicator { display: none !important; }
    .notes-container, .ninja-cat-table, .itemized-list table, .itemized-list th, .itemized-list td  { border: 1px solid #e0e0e0 !important;  }
    .notes-container { page-break-inside: avoid; }
    .ninja-cat-cell { background-color: #143475 !important; color: white !important; font-style: italic !important; padding: 5px 10px !important; }
    .signature-cell-left h2{ background-color: transparent !important; color: rgb(0, 0, 0) !important; }
    .info-row.hide-on-print { display: none !important; }
    .quotation-container .payment-cell { border: none !important; border-right: 1px solid #e0e0e0 !important; }
    .quotation-container .summary-row .value { padding: 2px 5px !important; }
    .quotation-container .notes-container { border: 1px solid #e0e0e0 !important; }
    .quotation-container .notes-container h2 { border: none !important; }
    .quotation-container .notes-container ol { border: none !important; }
    .quotation-container .notes-container li { padding: 8px !important; border-bottom: 1px solid #e0e0e0 !important; border-top: none !important; border-left: none !important; border-right: none !important; }
    .quotation-container .payment-cell h2, .quotation-container .payment-cell p, .quotation-container .payment-cell h3, .quotation-container .payment-cell li { padding-left: 10px !important; }
    .quotation-container .itemized-list th, .quotation-container .itemized-list td { padding: 5px !important; text-align: left; font-size: 12px !important;  }
    .quotation-container .info-row .value.hide-on-print-value {display: none !important;}
}
/* 螢幕隱藏、列印顯示 */
.print-only { display: none; }

@media print {
  /* 隱藏整個應用殼與按鈕，只留列印內容 */
  .sidebar, #content, .actions, #btn-print { display: none !important; }
  .print-only { display: block; }

  /* A4 版面與基本表格風格，可依公司樣式調 */
  #print-root { font-family: "Noto Sans TC", system-ui, sans-serif; color:#111; }
  .qdoc-title { font-size: 28px; font-weight:700; text-align:center; margin: 6mm 0 3mm; }
  .qdoc-meta, .qdoc-parties, .qdoc-project, .qdoc-totals, .qdoc-bank { border:1px solid #333; padding:4mm; margin: 0 0 3mm; }
  .qdoc-meta { display:flex; justify-content:space-between; }
  .qdoc-parties { display:grid; grid-template-columns:1fr 1fr; gap:3mm; }
  table.qdoc { width:100%; border-collapse:collapse; }
  table.qdoc th, table.qdoc td { border:1px solid #333; padding:2.5mm; font-size:11pt; vertical-align:top; }
  table.qdoc th { background:#f2f2f2; -webkit-print-color-adjust: exact; print-color-adjust: exact; }
  .t-right { text-align:right; } .t-center { text-align:center; }
  .qdoc-totals .row { display:flex; justify-content:space-between; }
  .qdoc-totals .total { font-weight:700; background:#fff9c4; -webkit-print-color-adjust: exact; print-color-adjust: exact; }
  .qdoc-stamps { display:grid; grid-template-columns:100px 1fr 100px 1fr; gap:3mm; align-items:center; margin-top:4mm; }
  .stamp-box { height:28mm; border:1px dashed #777; }
}
